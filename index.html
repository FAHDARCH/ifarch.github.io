<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orthoplus - Gestion de cabinet d'orthophonie</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<header class="hero" id="accueil">
    <nav class="navbar">
        <div class="brand">
            <span class="brand-mark">O+</span>
            <div>
                <h1>Orthoplus</h1>
                <p>Gestion complète du cabinet d'orthophonie</p>
            </div>
        </div>
        <ul class="nav-links">
            <li><a href="#agenda">Agenda</a></li>
            <li><a href="#patients">Patients</a></li>
            <li><a href="#rendezvous">Rendez-vous</a></li>
            <li><a href="#finance">Finance</a></li>
            <li><a href="#contact">Contact</a></li>
        </ul>
        <button class="primary">Nouveau rendez-vous</button>
    </nav>

    <div class="hero-content">
        <div>
            <p class="eyebrow">Cabinet orthoplus + orthophonie</p>
            <h2>Un espace unique pour l'agenda, les dossiers patients et la gestion financière.</h2>
            <p class="hero-subtitle">
                Organisez vos semaines, tracez l'évolution des bilans (1 à 3 séances) et pilotez vos revenus en temps réel.
            </p>
            <div class="storage-status" id="storage-status" role="status" aria-live="polite"></div>
            <div class="hero-actions">
                <button class="primary">Démarrer une semaine</button>
                <button class="ghost">Importer un patient</button>
            </div>
        </div>
            <div class="hero-card">
                <h3>Semaine en cours</h3>
            <ul>
                <li><strong>32</strong> rendez-vous planifiés</li>
                <li><strong>8</strong> bilans de langage en cours</li>
                <li><strong>5</strong> séances de suivi aujourd'hui</li>
            </ul>
            <div class="hero-metrics">
                <div>
                    <span>Recettes estimées</span>
                    <strong>2 450 €</strong>
                </div>
                <div>
                    <span>Impayés</span>
                    <strong>120 €</strong>
                </div>
            </div>
        </div>
    </div>
</header>

<section id="agenda" class="section">
    <div class="container">
        <div class="section-head">
            <div>
                <p class="eyebrow">Agenda hebdomadaire</p>
                <h2>Organisateur de rendez-vous par semaine</h2>
                <p>Planifiez les consultations, séances et bilans avec sauvegarde automatique des semaines précédentes.</p>
            </div>
            <div class="week-switch">
                <button class="ghost">Semaine précédente</button>
                <button class="primary">Semaine actuelle</button>
                <button class="ghost">Semaine suivante</button>
            </div>
        </div>
        <div class="agenda-grid">
            <div class="agenda-card">
                <h3>Vue semaine</h3>
                <div class="week-grid">
                    <div class="week-header">Lun</div>
                    <div class="week-header">Mar</div>
                    <div class="week-header">Mer</div>
                    <div class="week-header">Jeu</div>
                    <div class="week-header">Ven</div>
                    <div class="week-cell">09:00 - Consultation Julie M.</div>
                    <div class="week-cell">10:30 - Séance Noah K.</div>
                    <div class="week-cell">11:15 - Bilan écrit (1/3)</div>
                    <div class="week-cell">09:30 - Séance Lila O.</div>
                    <div class="week-cell">10:00 - Bilan oral (2/3)</div>
                    <div class="week-cell">14:00 - Séance Adam B.</div>
                    <div class="week-cell">15:00 - Consultation Emma D.</div>
                    <div class="week-cell">16:30 - Séance collectif</div>
                    <div class="week-cell">14:15 - Consultation Sara H.</div>
                    <div class="week-cell">15:30 - Bilan écrit (3/3)</div>
                </div>
            </div>
            <div class="agenda-card">
                <h3>Historique des semaines</h3>
                <ul class="archive">
                    <li>
                        <span>Semaine du 02 - 06 Septembre</span>
                        <button class="ghost">Consulter</button>
                    </li>
                    <li>
                        <span>Semaine du 26 - 30 Août</span>
                        <button class="ghost">Consulter</button>
                    </li>
                    <li>
                        <span>Semaine du 19 - 23 Août</span>
                        <button class="ghost">Consulter</button>
                    </li>
                </ul>
                <div class="save-note">
                    <p>Sauvegarde automatique activée : chaque semaine est archivée et consultable.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<section id="patients" class="section light">
    <div class="container">
        <div class="section-head">
            <div>
                <p class="eyebrow">Dossiers patients</p>
                <h2>Fiches patients complètes et toujours à jour</h2>
                <p>Centralisez les informations, l'historique des rendez-vous et l'évolution du bilan.</p>
            </div>
            <button class="primary">Créer une fiche</button>
        </div>
        <div class="patient-grid">
            <article class="patient-card">
                <header>
                    <div>
                        <h3>Fiche patient</h3>
                        <p>Informations modifiables en direct</p>
                    </div>
                    <span class="status">Suivi actif</span>
                </header>
                <form class="patient-form">
                    <label>
                        Nom et prénom
                        <input type="text" value="Camille R." data-storage="patient-1-name">
                    </label>
                    <label>
                        Âge
                        <input type="number" value="7" data-storage="patient-1-age">
                    </label>
                    <label>
                        Type de bilan
                        <select data-storage="patient-1-bilan-type">
                            <option>Langage écrit</option>
                            <option>Langage oral</option>
                        </select>
                    </label>
                    <label>
                        Contact parent
                        <input type="text" value="Sophie R. · 06 12 34 56 78" data-storage="patient-1-contact">
                    </label>
                    <label>
                        Objectifs
                        <textarea rows="3" data-storage="patient-1-objectifs">fluidité de lecture, compréhension écrite</textarea>
                    </label>
                    <label>
                        Dernière séance
                        <input type="text" value="12/09 · consolidation phonologique" data-storage="patient-1-derniere-seance">
                    </label>
                    <label>
                        Statut du patient
                        <select data-storage="patient-1-statut">
                            <option>Suivi actif</option>
                            <option>Bilan en attente</option>
                            <option>Progression</option>
                        </select>
                    </label>
                </form>
                <div class="patient-tags editable-tags">
                    <span contenteditable="true" data-storage="patient-1-tag-1">Consultation</span>
                    <span contenteditable="true" data-storage="patient-1-tag-2">Séances hebdo</span>
                    <span contenteditable="true" data-storage="patient-1-tag-3">Bilan 2/3</span>
                </div>
                <button class="ghost">Mettre à jour la fiche</button>
            </article>
            <article class="patient-card">
                <header>
                    <div>
                        <h3>Fiche patient</h3>
                        <p>Informations modifiables en direct</p>
                    </div>
                    <span class="status warning">Bilan en attente</span>
                </header>
                <form class="patient-form">
                    <label>
                        Nom et prénom
                        <input type="text" value="Karim T." data-storage="patient-2-name">
                    </label>
                    <label>
                        Âge
                        <input type="number" value="34" data-storage="patient-2-age">
                    </label>
                    <label>
                        Type de bilan
                        <select data-storage="patient-2-bilan-type">
                            <option>Langage oral</option>
                            <option>Langage écrit</option>
                        </select>
                    </label>
                    <label>
                        Motif
                        <input type="text" value="reprise de parole post AVC" data-storage="patient-2-motif">
                    </label>
                    <label>
                        Protocoles
                        <textarea rows="3" data-storage="patient-2-protocoles">praxies bucco-faciales, coordination souffle</textarea>
                    </label>
                    <label>
                        Prochaine séance
                        <input type="text" value="18/09 · bilan oral (1/3)" data-storage="patient-2-prochaine-seance">
                    </label>
                </form>
                <div class="patient-tags editable-tags">
                    <span contenteditable="true" data-storage="patient-2-tag-1">Bilan oral</span>
                    <span contenteditable="true" data-storage="patient-2-tag-2">1 séance planifiée</span>
                </div>
                <button class="ghost">Ajouter un compte rendu</button>
            </article>
            <article class="patient-card">
                <header>
                    <div>
                        <h3>Fiche patient</h3>
                        <p>Informations modifiables en direct</p>
                    </div>
                    <span class="status success">Progression</span>
                </header>
                <form class="patient-form">
                    <label>
                        Nom et prénom
                        <input type="text" value="Lina P." data-storage="patient-3-name">
                    </label>
                    <label>
                        Âge
                        <input type="number" value="12" data-storage="patient-3-age">
                    </label>
                    <label>
                        Programme
                        <input type="text" value="articulation / phonation" data-storage="patient-3-programme">
                    </label>
                    <label>
                        Dernier bilan
                        <input type="text" value="05/08 · oral 3/3 terminé" data-storage="patient-3-dernier-bilan">
                    </label>
                    <label>
                        Prochaine séance
                        <input type="text" value="16/09 · atelier articulation" data-storage="patient-3-prochaine-seance">
                    </label>
                </form>
                <div class="patient-tags editable-tags">
                    <span contenteditable="true" data-storage="patient-3-tag-1">Séances</span>
                    <span contenteditable="true" data-storage="patient-3-tag-2">Historique complet</span>
                </div>
                <button class="ghost">Voir l'historique</button>
            </article>
        </div>
    </div>
</section>

<section id="rendezvous" class="section">
    <div class="container">
        <div class="section-head">
            <div>
                <p class="eyebrow">Types de rendez-vous</p>
                <h2>Choisissez le type de séance et le format de bilan</h2>
                <p>Paramétrez chaque rendez-vous en un clic : consultation, séance ou bilan (1 à 3 séances).</p>
            </div>
            <button class="primary">Configurer un rendez-vous</button>
        </div>
        <form class="appointment-form">
            <div class="form-row">
                <label>
                    Patient
                    <input type="text" placeholder="Nom du patient" data-storage="rdv-patient">
                </label>
                <label>
                    Type de rendez-vous
                    <select data-storage="rdv-type">
                        <option>Consultation</option>
                        <option>Séance</option>
                        <option>Bilan</option>
                    </select>
                </label>
                <label>
                    Date
                    <input type="date" data-storage="rdv-date">
                </label>
                <label>
                    Heure
                    <input type="time" data-storage="rdv-heure">
                </label>
            </div>
            <div class="form-row">
                <label>
                    Séances de bilan (1 à 3)
                    <select data-storage="rdv-bilan-nombre">
                        <option>1 séance</option>
                        <option>2 séances</option>
                        <option>3 séances</option>
                    </select>
                </label>
                <label>
                    Type de bilan
                    <select data-storage="rdv-bilan-type">
                        <option>Langage écrit</option>
                        <option>Langage oral</option>
                    </select>
                </label>
                <label>
                    Confirmation après 1h
                    <select data-storage="rdv-confirmation">
                        <option>En attente</option>
                        <option>Fait</option>
                        <option>Pas fait</option>
                    </select>
                </label>
                <label>
                    Comptabilisation
                    <select data-storage="rdv-compta">
                        <option>À comptabiliser</option>
                        <option>Non comptabilisé</option>
                    </select>
                </label>
            </div>
            <label>
                Notes de séance
                <textarea rows="3" placeholder="Objectifs, observation, matériel..." data-storage="rdv-notes"></textarea>
            </label>
            <p class="hint">Après 1h du rendez-vous, confirmez “fait” ou “pas fait” pour le comptabiliser.</p>
            <div class="alert" id="rdv-alert" role="status" aria-live="polite"></div>
        </form>
        <div class="appointment-grid">
            <div class="appointment-card">
                <h3>Consultation</h3>
                <p>Premier échange ou point d'étape rapide.</p>
                <ul>
                    <li>Durée : 30 min</li>
                    <li>Notes de consultation simplifiées</li>
                    <li>Compte rendu automatique</li>
                </ul>
            </div>
            <div class="appointment-card">
                <h3>Séances</h3>
                <p>Suivi régulier avec objectifs personnalisés.</p>
                <ul>
                    <li>Planification récurrente</li>
                    <li>Exercices et supports</li>
                    <li>Progression suivie</li>
                </ul>
            </div>
            <div class="appointment-card highlight">
                <h3>Bilan</h3>
                <p>De 1 à 3 séances selon les besoins du patient.</p>
                <div class="bilan-options">
                    <div>
                        <h4>Nombre de séances</h4>
                        <div class="chips">
                            <span>1 séance</span>
                            <span>2 séances</span>
                            <span>3 séances</span>
                        </div>
                    </div>
                    <div>
                        <h4>Type de bilan</h4>
                        <div class="chips">
                            <span>Langage écrit</span>
                            <span>Langage oral</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section id="finance" class="section light">
    <div class="container">
        <div class="section-head">
            <div>
                <p class="eyebrow">Gestion financière</p>
                <h2>Pilotez les recettes et dépenses du cabinet</h2>
                <p>Suivi des encaissements, facturation et indicateurs financiers du cabinet d'orthophonie.</p>
            </div>
            <button class="primary">Exporter la comptabilité</button>
        </div>
        <div class="finance-grid">
            <div class="finance-card">
                <h3>Encaissements</h3>
                <label>
                    Montant
                    <input type="text" value="8 240 €" data-storage="finance-encaissements-montant">
                </label>
                <label>
                    Commentaire
                    <input type="text" value="Ce mois-ci · 92% des paiements reçus" data-storage="finance-encaissements-note">
                </label>
            </div>
            <div class="finance-card">
                <h3>Factures en attente</h3>
                <label>
                    Montant
                    <input type="text" value="620 €" data-storage="finance-factures-montant">
                </label>
                <label>
                    Commentaire
                    <input type="text" value="Relances automatiques envoyées" data-storage="finance-factures-note">
                </label>
            </div>
            <div class="finance-card">
                <h3>Dépenses cabinet</h3>
                <label>
                    Montant
                    <input type="text" value="1 130 €" data-storage="finance-depenses-montant">
                </label>
                <label>
                    Commentaire
                    <input type="text" value="Locaux, matériel, formations" data-storage="finance-depenses-note">
                </label>
            </div>
            <div class="finance-card accent">
                <h3>Tableau de bord</h3>
                <label>
                    Prévision trimestre
                    <input type="text" value="24 500 €" data-storage="finance-prevision">
                </label>
                <label>
                    Reste à facturer
                    <input type="text" value="3 200 €" data-storage="finance-reste">
                </label>
                <label>
                    Note financière
                    <input type="text" value="Suivi des mutuelles intégré" data-storage="finance-note">
                </label>
            </div>
        </div>
    </div>
</section>

<section id="contact" class="section">
    <div class="container">
        <div class="section-head">
            <div>
                <p class="eyebrow">Contact</p>
                <h2>Nous contacter pour une démonstration</h2>
                <p>Décrivez votre cabinet et vos besoins, nous vous répondrons rapidement.</p>
            </div>
        </div>
        <form class="contact-form">
            <div class="form-row">
                <input type="text" name="name" placeholder="Nom complet" required>
                <input type="email" name="email" placeholder="Adresse email" required>
            </div>
            <input type="text" name="cabinet" placeholder="Nom du cabinet" required>
            <textarea name="message" placeholder="Votre message" rows="5" required></textarea>
            <button class="primary" type="submit">Envoyer la demande</button>
        </form>
    </div>
</section>

<footer>
    <div class="container footer-content">
        <div>
            <h3>Orthoplus</h3>
            <p>Plateforme dédiée à la gestion des cabinets d'orthophonie.</p>
        </div>
        <div class="footer-links">
            <a href="#agenda">Agenda</a>
            <a href="#patients">Patients</a>
            <a href="#finance">Finance</a>
            <a href="#contact">Contact</a>
        </div>
        <div class="footer-note">
            <p>© 2024 Orthoplus. Tous droits réservés.</p>
        </div>
    </div>
</footer>
<script>
    const storageAvailable = () => {
        try {
            const testKey = "__orthoplus__";
            localStorage.setItem(testKey, testKey);
            localStorage.removeItem(testKey);
            return true;
        } catch (error) {
            return false;
        }
    };

    const canStore = storageAvailable();
    const storageStatus = document.querySelector("#storage-status");
    if (storageStatus) {
        storageStatus.textContent = canStore
            ? "Les modifications sont enregistrées localement dans ce navigateur."
            : "Attention : la sauvegarde locale est désactivée sur cet appareil.";
        storageStatus.classList.toggle("warning", !canStore);
    }
    const editableFields = document.querySelectorAll("[data-storage]");
    const loadValue = (field, key) => {
        if (!canStore) return;
        const saved = localStorage.getItem(key);
        if (saved === null) return;
        if (field.isContentEditable) {
            field.textContent = saved;
            return;
        }
        if (field.tagName === "SELECT") {
            field.value = saved;
            return;
        }
        field.value = saved;
    };

    const saveValue = (field, key) => {
        if (!canStore) return;
        const value = field.isContentEditable ? field.textContent.trim() : field.value;
        localStorage.setItem(key, value);
    };

    editableFields.forEach((field) => {
        const key = field.dataset.storage;
        loadValue(field, key);

        if (field.isContentEditable) {
            field.addEventListener("blur", () => saveValue(field, key));
            field.addEventListener("input", () => saveValue(field, key));
            field.addEventListener("keyup", () => saveValue(field, key));
            return;
        }

        const eventType = field.tagName === "SELECT" ? "change" : "input";
        field.addEventListener(eventType, () => saveValue(field, key));
    });

    const appointmentDate = document.querySelector("[data-storage=\"rdv-date\"]");
    const appointmentTime = document.querySelector("[data-storage=\"rdv-heure\"]");
    const appointmentConfirmation = document.querySelector("[data-storage=\"rdv-confirmation\"]");
    const appointmentAlert = document.querySelector("#rdv-alert");

    const updateAppointmentStatus = () => {
        if (!appointmentDate || !appointmentTime || !appointmentConfirmation || !appointmentAlert) {
            return;
        }

        const dateValue = appointmentDate.value;
        const timeValue = appointmentTime.value;
        appointmentAlert.textContent = "";
        appointmentConfirmation.classList.remove("needs-confirmation");

        if (!dateValue || !timeValue) {
            return;
        }

        const appointmentMoment = new Date(`${dateValue}T${timeValue}`);
        if (Number.isNaN(appointmentMoment.getTime())) {
            appointmentAlert.textContent = "Veuillez vérifier la date et l'heure du rendez-vous.";
            return;
        }

        const now = new Date();
        const confirmationTime = new Date(appointmentMoment.getTime() + 60 * 60 * 1000);

        if (now >= confirmationTime && appointmentConfirmation.value === "En attente") {
            appointmentAlert.textContent = "Le rendez-vous doit être confirmé (fait / pas fait) pour comptabilisation.";
            appointmentConfirmation.classList.add("needs-confirmation");
        } else if (now < confirmationTime) {
            appointmentAlert.textContent = "La confirmation sera requise 1h après l'heure du rendez-vous.";
        }
    };

    ["input", "change"].forEach((eventName) => {
        appointmentDate?.addEventListener(eventName, updateAppointmentStatus);
        appointmentTime?.addEventListener(eventName, updateAppointmentStatus);
        appointmentConfirmation?.addEventListener(eventName, updateAppointmentStatus);
    });

    setInterval(updateAppointmentStatus, 60000);
    updateAppointmentStatus();
</script>
</body>
</html>
